#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
# Source0 file verified with key 0x2209D6902F969C95 (meissner@suse.de)
#
Name     : libgphoto2
Version  : 2.5.28
Release  : 26
URL      : https://sourceforge.net/projects/gphoto/files/libgphoto/2.5.28/libgphoto2-2.5.28.tar.xz
Source0  : https://sourceforge.net/projects/gphoto/files/libgphoto/2.5.28/libgphoto2-2.5.28.tar.xz
Source1  : https://sourceforge.net/projects/gphoto/files/libgphoto/2.5.28/libgphoto2-2.5.28.tar.xz.asc
Summary  : Library for easy access to digital cameras
Group    : Development/Tools
License  : GPL-2.0
Requires: libgphoto2-bin = %{version}-%{release}
Requires: libgphoto2-data = %{version}-%{release}
Requires: libgphoto2-filemap = %{version}-%{release}
Requires: libgphoto2-lib = %{version}-%{release}
Requires: libgphoto2-license = %{version}-%{release}
Requires: libgphoto2-locales = %{version}-%{release}
BuildRequires : curl-dev
BuildRequires : doxygen
BuildRequires : gettext
BuildRequires : graphviz
BuildRequires : libexif-dev
BuildRequires : libgd-dev
BuildRequires : libusb-dev
BuildRequires : libxml2-dev
BuildRequires : perl(XML::Parser)
BuildRequires : sed

%description
libgphoto2 2.5.27 release
ptp2:
* report filesizes larger than 4GB correctly
* download files larger than 4GB
* empty ptp strings are reported as "", not as NULL
* report more MTP object properties
* Nikon
* download of files larger than 4GB using getpartial object method
* handle new application mode
* handle new eventex fetcher on Z series
* fixed movie on recent Z series
* report liveview and movie prohibit conditions, as errors and also in configuration tree
* some Nikon 1 V1 enhancements (the first camera of the 1 series is a bit special)
* report filesize > 4GB correctly, if possible
* Canon EOS:
* EOS M6 Mark 2 is actually more like a EOS DSLR and fully capable, added some work
* Handle OLCINFO for M6 Mark 2 and EOS R5 and new cameras
* added current list of autoexposuremode to expose also Fv and friends
* Canon Liveview size is encoded in "output" (PC / MOBILE / MOBILE2 variants are the different livesizes), try to expose seperately as "liveviewsize"
* decode more options, nickname, eosmoviemode (color/bw), strobofiring, eventmode, flashcharged, oneshotrawon
* bugfixes
* Sony Alpha:
* report f-numbers enum with fixed list
* fixed liveview taking on a new model
* Panasonic
* implement liveviewsize
* implement movie recording ( using --set-config movie=1/0 )
* more doc and minor fixes
* ptp/ip: allow building on Windows
* New IDS:
* Sony DSC-A7S III
* Nikon Coolpix P1000, Z6_2, Z7_2
* Olympus E-M1 MII
* Canon PowerShot G12, EOS M200
* Fuji Fujifilm X-S10
* Ricoh Theta V, Z1

%package bin
Summary: bin components for the libgphoto2 package.
Group: Binaries
Requires: libgphoto2-data = %{version}-%{release}
Requires: libgphoto2-license = %{version}-%{release}
Requires: libgphoto2-filemap = %{version}-%{release}

%description bin
bin components for the libgphoto2 package.


%package data
Summary: data components for the libgphoto2 package.
Group: Data

%description data
data components for the libgphoto2 package.


%package dev
Summary: dev components for the libgphoto2 package.
Group: Development
Requires: libgphoto2-lib = %{version}-%{release}
Requires: libgphoto2-bin = %{version}-%{release}
Requires: libgphoto2-data = %{version}-%{release}
Provides: libgphoto2-devel = %{version}-%{release}
Requires: libgphoto2 = %{version}-%{release}

%description dev
dev components for the libgphoto2 package.


%package doc
Summary: doc components for the libgphoto2 package.
Group: Documentation

%description doc
doc components for the libgphoto2 package.


%package filemap
Summary: filemap components for the libgphoto2 package.
Group: Default

%description filemap
filemap components for the libgphoto2 package.


%package lib
Summary: lib components for the libgphoto2 package.
Group: Libraries
Requires: libgphoto2-data = %{version}-%{release}
Requires: libgphoto2-license = %{version}-%{release}
Requires: libgphoto2-filemap = %{version}-%{release}

%description lib
lib components for the libgphoto2 package.


%package license
Summary: license components for the libgphoto2 package.
Group: Default

%description license
license components for the libgphoto2 package.


%package locales
Summary: locales components for the libgphoto2 package.
Group: Default

%description locales
locales components for the libgphoto2 package.


%prep
%setup -q -n libgphoto2-2.5.28
cd %{_builddir}/libgphoto2-2.5.28
pushd ..
cp -a libgphoto2-2.5.28 buildavx2
popd
pushd ..
cp -a libgphoto2-2.5.28 buildavx512
popd

%build
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export SOURCE_DATE_EPOCH=1641324845
export GCC_IGNORE_WERROR=1
export AR=gcc-ar
export RANLIB=gcc-ranlib
export NM=gcc-nm
export CFLAGS="$CFLAGS -O3 -Ofast -falign-functions=32 -ffat-lto-objects -flto=auto -fno-semantic-interposition -mno-vzeroupper -mprefer-vector-width=256 "
export FCFLAGS="$FFLAGS -O3 -Ofast -falign-functions=32 -ffat-lto-objects -flto=auto -fno-semantic-interposition -mno-vzeroupper -mprefer-vector-width=256 "
export FFLAGS="$FFLAGS -O3 -Ofast -falign-functions=32 -ffat-lto-objects -flto=auto -fno-semantic-interposition -mno-vzeroupper -mprefer-vector-width=256 "
export CXXFLAGS="$CXXFLAGS -O3 -Ofast -falign-functions=32 -ffat-lto-objects -flto=auto -fno-semantic-interposition -mno-vzeroupper -mprefer-vector-width=256 "
%configure --disable-static
make  %{?_smp_mflags}

unset PKG_CONFIG_PATH
pushd ../buildavx2/
export CFLAGS="$CFLAGS -m64 -march=x86-64-v3 -Wl,-z,x86-64-v3"
export CXXFLAGS="$CXXFLAGS -m64 -march=x86-64-v3 -Wl,-z,x86-64-v3"
export FFLAGS="$FFLAGS -m64 -march=x86-64-v3 -Wl,-z,x86-64-v3"
export FCFLAGS="$FCFLAGS -m64 -march=x86-64-v3"
export LDFLAGS="$LDFLAGS -m64 -march=x86-64-v3"
%configure --disable-static
make  %{?_smp_mflags}
popd
unset PKG_CONFIG_PATH
pushd ../buildavx512/
export CFLAGS="$CFLAGS -m64 -march=x86-64-v4 -mprefer-vector-width=256 -Wl,-z,x86-64-v4"
export CXXFLAGS="$CXXFLAGS -m64 -march=x86-64-v4 -mprefer-vector-width=256 -Wl,-z,x86-64-v4"
export FFLAGS="$FFLAGS -m64 -march=x86-64-v4 -mprefer-vector-width=256"
export FCFLAGS="$FCFLAGS -m64 -march=x86-64-v4 -mprefer-vector-width=256"
export LDFLAGS="$LDFLAGS -m64 -march=x86-64-v4"
%configure --disable-static
make  %{?_smp_mflags}
popd
%check
export LANG=C.UTF-8
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
make %{?_smp_mflags} check
cd ../buildavx2;
make %{?_smp_mflags} check || :
cd ../buildavx512;
make %{?_smp_mflags} check || :

%install
export SOURCE_DATE_EPOCH=1641324845
rm -rf %{buildroot}
mkdir -p %{buildroot}/usr/share/package-licenses/libgphoto2
cp %{_builddir}/libgphoto2-2.5.28/camlibs/konica/COPYING %{buildroot}/usr/share/package-licenses/libgphoto2/c5b09578f14b2217fb4da494d2eddff60f9991db
pushd ../buildavx2/
%make_install_v3
popd
pushd ../buildavx512/
%make_install_v4
popd
%make_install
%find_lang libgphoto2-6
%find_lang libgphoto2_port-12
/usr/bin/elf-move.py avx2 %{buildroot}-v3 %{buildroot}/usr/share/clear/optimized-elf/ %{buildroot}/usr/share/clear/filemap/filemap-%{name}
/usr/bin/elf-move.py avx512 %{buildroot}-v4 %{buildroot}/usr/share/clear/optimized-elf/ %{buildroot}/usr/share/clear/filemap/filemap-%{name}

%files
%defattr(-,root,root,-)
/usr/lib64/libgphoto2/print-camera-list
/usr/lib64/udev/check-ptp-camera

%files bin
%defattr(-,root,root,-)
/usr/bin/gphoto2-config
/usr/bin/gphoto2-port-config

%files data
%defattr(-,root,root,-)
/usr/share/libgphoto2/2.5.28/konica/english
/usr/share/libgphoto2/2.5.28/konica/french
/usr/share/libgphoto2/2.5.28/konica/german
/usr/share/libgphoto2/2.5.28/konica/japanese
/usr/share/libgphoto2/2.5.28/konica/korean
/usr/share/libgphoto2/2.5.28/konica/spanish
/usr/share/libgphoto2_port/0.12.0/vcamera/README.txt

%files dev
%defattr(-,root,root,-)
/usr/include/gphoto2/gphoto2-abilities-list.h
/usr/include/gphoto2/gphoto2-camera.h
/usr/include/gphoto2/gphoto2-context.h
/usr/include/gphoto2/gphoto2-file.h
/usr/include/gphoto2/gphoto2-filesys.h
/usr/include/gphoto2/gphoto2-library.h
/usr/include/gphoto2/gphoto2-list.h
/usr/include/gphoto2/gphoto2-port-info-list.h
/usr/include/gphoto2/gphoto2-port-log.h
/usr/include/gphoto2/gphoto2-port-portability.h
/usr/include/gphoto2/gphoto2-port-result.h
/usr/include/gphoto2/gphoto2-port-version.h
/usr/include/gphoto2/gphoto2-port.h
/usr/include/gphoto2/gphoto2-result.h
/usr/include/gphoto2/gphoto2-setting.h
/usr/include/gphoto2/gphoto2-version.h
/usr/include/gphoto2/gphoto2-widget.h
/usr/include/gphoto2/gphoto2.h
/usr/lib64/libgphoto2.so
/usr/lib64/libgphoto2_port.so
/usr/lib64/pkgconfig/libgphoto2.pc
/usr/lib64/pkgconfig/libgphoto2_port.pc
/usr/share/man/man3/libgphoto2.3
/usr/share/man/man3/libgphoto2_port.3

%files doc
%defattr(0644,root,root,0755)
%doc /usr/share/doc/libgphoto2/*
/usr/share/doc/libgphoto2_port/AUTHORS
/usr/share/doc/libgphoto2_port/NEWS
/usr/share/doc/libgphoto2_port/README

%files filemap
%defattr(-,root,root,-)
/usr/share/clear/filemap/filemap-libgphoto2

%files lib
%defattr(-,root,root,-)
/usr/lib64/libgphoto2.so.6
/usr/lib64/libgphoto2.so.6.2.0
/usr/lib64/libgphoto2/2.5.28/ax203.so
/usr/lib64/libgphoto2/2.5.28/canon.so
/usr/lib64/libgphoto2/2.5.28/digigr8.so
/usr/lib64/libgphoto2/2.5.28/dimagev.so
/usr/lib64/libgphoto2/2.5.28/directory.so
/usr/lib64/libgphoto2/2.5.28/docupen.so
/usr/lib64/libgphoto2/2.5.28/jl2005a.so
/usr/lib64/libgphoto2/2.5.28/jl2005c.so
/usr/lib64/libgphoto2/2.5.28/kodak_dc240.so
/usr/lib64/libgphoto2/2.5.28/lumix.so
/usr/lib64/libgphoto2/2.5.28/mars.so
/usr/lib64/libgphoto2/2.5.28/pentax.so
/usr/lib64/libgphoto2/2.5.28/ptp2.so
/usr/lib64/libgphoto2/2.5.28/ricoh_g3.so
/usr/lib64/libgphoto2/2.5.28/sierra.so
/usr/lib64/libgphoto2/2.5.28/sonix.so
/usr/lib64/libgphoto2/2.5.28/sq905.so
/usr/lib64/libgphoto2/2.5.28/st2205.so
/usr/lib64/libgphoto2/2.5.28/topfield.so
/usr/lib64/libgphoto2/2.5.28/tp6801.so
/usr/lib64/libgphoto2_port.so.12
/usr/lib64/libgphoto2_port.so.12.0.0
/usr/lib64/libgphoto2_port/0.12.0/disk.so
/usr/lib64/libgphoto2_port/0.12.0/ptpip.so
/usr/lib64/libgphoto2_port/0.12.0/serial.so
/usr/lib64/libgphoto2_port/0.12.0/usb1.so
/usr/lib64/libgphoto2_port/0.12.0/usbdiskdirect.so
/usr/lib64/libgphoto2_port/0.12.0/usbscsi.so
/usr/share/clear/optimized-elf/lib*

%files license
%defattr(0644,root,root,0755)
/usr/share/package-licenses/libgphoto2/c5b09578f14b2217fb4da494d2eddff60f9991db

%files locales -f libgphoto2-6.lang -f libgphoto2_port-12.lang
%defattr(-,root,root,-)

